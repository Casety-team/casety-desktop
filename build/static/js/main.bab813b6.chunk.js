(this["webpackJsonpcasety-front"]=this["webpackJsonpcasety-front"]||[]).push([[0],{167:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),r=n.n(s),a=n(52),i=n.n(a),o=(n(62),n(3)),j=n(11),l=n(4),d=n(12),b=n.n(d),u=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:4545/api/",O=function(e,t,n,c){return b.a.post(u+"auth/signup",{firstname:e,lastname:t,email:n,password:c})},h=function(e,t){return b.a.post(u+"signin",{email:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},x=function(){localStorage.removeItem("user")},f=function(){return JSON.parse(localStorage.getItem("user"))},v=n(19),p=n.n(v),m=n(14),g=n.n(m),S=n(20),E=n.n(S),T=function(e){if(!e)return Object(c.jsx)("div",{role:"alert",children:"This field is required!"})},_=function(e){var t=Object(s.useRef)(),n=Object(s.useRef)(),r=Object(s.useState)(""),a=Object(o.a)(r,2),i=a[0],j=a[1],l=Object(s.useState)(""),d=Object(o.a)(l,2),b=d[0],u=d[1],O=Object(s.useState)(!1),x=Object(o.a)(O,2),f=x[0],v=x[1],m=Object(s.useState)(""),S=Object(o.a)(m,2),_=S[0],C=S[1];return Object(c.jsxs)(p.a,{onSubmit:function(c){c.preventDefault(),C(""),v(!0),t.current.validateAll(),0===n.current.context._errors.length?h(i,b).then((function(){e.history.push("/profile/"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();v(!1),C(t)})):v(!1)},ref:t,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"Email",children:"Email"}),Object(c.jsx)(g.a,{type:"text",name:"Email",value:i,onChange:function(e){var t=e.target.value;j(t)},validations:[T]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)(g.a,{type:"password",name:"password",value:b,onChange:function(e){var t=e.target.value;u(t)},validations:[T]})]}),Object(c.jsx)("div",{children:Object(c.jsxs)("button",{disabled:f,children:[f&&Object(c.jsx)("span",{children:"Spiner"}),Object(c.jsx)("span",{children:"Login"})]})}),_&&Object(c.jsx)("div",{children:Object(c.jsx)("div",{role:"alert",children:_})}),Object(c.jsx)(E.a,{style:{display:"none"},ref:n})]})},C=n(53),R=function(e){if(!e)return Object(c.jsx)("div",{role:"alert",children:"This field is required!"})},P=function(e){if(!Object(C.isEmail)(e))return Object(c.jsx)("div",{role:"alert",children:"This is not a valid email."})},w=function(e){if(e.length<3||e.length>20)return Object(c.jsx)("div",{role:"alert",children:"The Firstname must be between 3 and 20 characters."})},L=function(e){if(e.length<3||e.length>20)return Object(c.jsx)("div",{role:"alert",children:"The Lastname must be between 3 and 20 characters."})},y=function(e){if(e.length<6||e.length>40)return Object(c.jsx)("div",{role:"alert",children:"The password must be between 6 and 40 characters."})},k=function(e){var t=Object(s.useRef)(),n=Object(s.useRef)(),r=Object(s.useState)(""),a=Object(o.a)(r,2),i=a[0],j=a[1],l=Object(s.useState)(""),d=Object(o.a)(l,2),b=d[0],u=d[1],h=Object(s.useState)(""),x=Object(o.a)(h,2),f=x[0],v=x[1],m=Object(s.useState)(""),S=Object(o.a)(m,2),T=S[0],_=S[1],C=Object(s.useState)(!1),k=Object(o.a)(C,2),A=k[0],F=k[1],I=Object(s.useState)(""),D=Object(o.a)(I,2),N=D[0],U=D[1];return Object(c.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),U(""),F(!1),t.current.validateAll(),0===n.current.context._errors.length&&O(i,b,f,T).then((function(e){U(e.data.message),F(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();U(t),F(!1)}))},ref:t,children:[!A&&Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"Firstname",children:"Firstname"}),Object(c.jsx)(g.a,{type:"text",name:"Firstname",value:i,onChange:function(e){var t=e.target.value;j(t)},validations:[R,w]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"Lastname",children:"Lastname"}),Object(c.jsx)(g.a,{type:"text",name:"Lastname",value:b,onChange:function(e){var t=e.target.value;u(t)},validations:[R,L]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)(g.a,{type:"text",name:"email",value:f,onChange:function(e){var t=e.target.value;v(t)},validations:[R,P]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)(g.a,{type:"password",name:"password",value:T,onChange:function(e){var t=e.target.value;_(t)},validations:[R,y]})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{children:"Sign Up"})})]}),N&&Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:A?"success":"danger",role:"alert",children:N})}),Object(c.jsx)(E.a,{style:{display:"none"},ref:n})]})};function A(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:4545/api/",I=function(){return b.a.get(F+"all")},D=function(){return b.a.get(F+"user",{headers:A()})},N=function(){return b.a.get(F+"mod",{headers:A()})},U=function(){return b.a.get(F+"admin",{headers:A()})},K=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){I().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();r(t)}))}),[]),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("header",{className:"jumbotron",children:Object(c.jsx)("h3",{children:n})})})},W=function(){var e=f();return Object(c.jsx)(c.Fragment,{children:e?Object(c.jsx)("a",{href:"/buy/1",children:"Buy"}):Object(c.jsx)("a",{href:"/login",children:"Go login"})})},H=n(26),B=n.n(H),J=n(54),M=n(55),G=(n(167),Object(M.a)("pk_test_51I6xfpGWsM2bVeof75ZGYq7KXzLoNhta0xQFMtwbOZTz6sQKE2200cc7J8QoeGXkILPAve6Wl1zdLRL1TBFaGaQZ00k7zmJZhm")),q=function(e){var t=e.handleClick;return Object(c.jsxs)("section",{children:[Object(c.jsx)("div",{className:"product",children:Object(c.jsx)("h1",{children:"Product 1 "})}),Object(c.jsx)("button",{type:"button",id:"checkout-button",role:"link",onClick:t,children:"Checkout"})]})},z=function(e){var t=e.message;return Object(c.jsx)("section",{children:Object(c.jsx)("p",{children:t})})};function Q(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)("Product 1"),i=Object(o.a)(a,2),j=i[0],l=(i[1],Object(s.useState)(300)),d=Object(o.a)(l,2),u=d[0],O=(d[1],Object(s.useState)(3)),h=Object(o.a)(O,2),x=h[0];h[1];Object(s.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.get("success")&&r("Order placed! You will receive an email confirmation."),e.get("canceled")&&r("Order canceled -- continue to shop around and checkout when you're ready.")}),[]);var f=function(){var e=Object(J.a)(B.a.mark((function e(t){var n,c,s,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:4545/",e.next=3,G;case 3:return c=e.sent,e.next=6,b.a.post(n+"/stripe/charge",{nameProduct:j,unitAmount:u,quantity:x,reservationId:1,idUser:1});case 6:return s=e.sent,e.next=9,s;case 9:return r=e.sent,e.next=12,c.redirectToCheckout({sessionId:r.data.id});case 12:e.sent.error;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(c.jsx)(z,{message:n}):Object(c.jsx)(q,{handleClick:f})}var V=function(){var e=f();return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("header",{className:"jumbotron",children:Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:e.username})," Profile"]})}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(c.jsx)("strong",{children:"Authorities:"}),Object(c.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(c.jsx)("li",{children:e},t)}))})]})},Z=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){D().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(t)}))}),[]),Object(c.jsx)("div",{children:Object(c.jsx)("header",{children:Object(c.jsx)("h3",{children:n})})})},X=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){N().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(t)}))}),[]),Object(c.jsx)("div",{children:Object(c.jsx)("header",{children:Object(c.jsx)("h3",{children:n})})})},Y=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){U().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(t)}))}),[]),Object(c.jsx)("div",{children:Object(c.jsx)("header",{children:Object(c.jsx)("h3",{children:n})})})},$=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=Object(o.a)(a,2),d=i[0],b=i[1],u=Object(s.useState)(!1),O=Object(o.a)(u,2),h=O[0],v=O[1],p=Object(s.useState)(void 0),m=Object(o.a)(p,2),g=m[0],S=m[1];Object(s.useEffect)((function(){var e=f();e&&(S(e),v(e.roles.includes("ROLE_USER")),r(e.roles.includes("ROLE_MODERATOR")),b(e.roles.includes("ROLE_ADMIN")))}),[]);return Object(c.jsxs)(j.a,{children:[Object(c.jsxs)("nav",{children:[Object(c.jsx)(j.b,{to:"/",children:"Casety"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/home",children:"Home"})}),Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/shop",children:"Shop"})}),d&&Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/admin",children:"Admin Board"})}),n&&Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/mod",children:"Moderator Board"})}),h&&Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/user",children:"User"})})]}),g?Object(c.jsxs)("div",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/profile",children:g.username})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/login",onClick:function(){x()},children:"LogOut"})})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/login",children:"Login"})}),Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/register",children:"Sign Up"})})]})]}),Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{exact:!0,path:["/","/home"],component:K}),Object(c.jsx)(l.b,{exact:!0,path:"/shop",component:W}),Object(c.jsx)(l.b,{exact:!0,path:"/buy/:productId",component:Q}),Object(c.jsx)(l.b,{exact:!0,path:"/login",component:_}),Object(c.jsx)(l.b,{exact:!0,path:"/register",component:k}),Object(c.jsx)(l.b,{path:"/profile",component:V}),Object(c.jsx)(l.b,{path:"/user",children:h?Object(c.jsx)(Z,{}):Object(c.jsx)(l.a,{to:"/"})}),Object(c.jsx)(l.b,{path:"/mod",children:n?Object(c.jsx)(X,{}):Object(c.jsx)(l.a,{to:"/"})}),Object(c.jsx)(l.b,{path:"/admin",children:d?Object(c.jsx)(Y,{}):Object(c.jsx)(l.a,{to:"/"})})]})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root")),ee()},62:function(e,t,n){}},[[170,1,2]]]);
//# sourceMappingURL=main.bab813b6.chunk.js.map